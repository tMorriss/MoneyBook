{% extends "web/_base.html" %}
{% load static %}
{% load humanize %}

{% block title %}{{ app_name }} Statistics{% endblock %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{% static 'web/statistics.css' %}">
{% endblock %}

{% block content %}
<section>
    <h1>統計情報</h1>
    <h2>ジャンプ</h2>
    <table class="tbl-common">
        <tr>
            <td rowspan="2">
                <a href="#"><img src="{% static 'web/images/left.png' %}" alt="←" width="40px" valign="middle"></a>
            </td>
            <td class="jump-date">
                <input type="text" name="year" id="jump_year" style="width:6ex" class="righter" value="{{ year }}" onkeypress="key_press_move(event.keyCode)" onfocus="deleteValue(this)">年
            </td>
            <td rowspan="2">
                <a href="#"><img src="{% static 'web/images/right.png' %}" alt="→" width="40px" valign="middle"></a>
            </td>
        </tr>
        <tr>
            <td><input type="button" class="btn-apply" value="更新" onclick="move_month()"></td>
        </tr>
    </table>
    <h2>月ごとの収支</h2>
    <table class="tbl-per-month tbl-common">
        <tr>
            <th></th>
            {% for m in month_io_list %}
                <th>{{ m.label }}</th>
            {% endfor %}
        </tr>
        <tr>
            <th>収入</th>
            {% for m in month_io_list %}
                <td>{{ m.income| intcomma }}</td>
            {% endfor %}
        </tr>
        <tr>
            <th>支出</th>
            {% for m in month_io_list %}
                <td>{{ m.outgo| intcomma }}</td>
            {% endfor %}
        </tr>
        <tr>
            <th>収支</th>
            {% for m in month_io_list %}
                <td>{{ m.balance| intcomma }}</td>
            {% endfor %}
        </tr>
    </table>
    <h2>グラフ</h2>
    <div id="barplot_inout" class="graph-statistic"></div>
    <br>
    <div id="lineplot_infra" class="graph-statistic"></div>
    <br>
    <div id="lineplot_food" class="graph-statistic"></div>
    <h2>全収支</h2>
    <?php
    draw_inout_table($pdo, $year, TRUE);
    ?>
    <div id="barplot_inout_all" class="graph-statistic"></div>
    <br>
    <div id="lineplot_monthly_balance" class="graph-statistic"></div>
</section>
{% endblock %}