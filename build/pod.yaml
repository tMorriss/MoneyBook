apiVersion: v1
kind: Pod
metadata:
  name: moneybook-pod
spec:
  restartPolicy: Always
  containers:
  - name: gunicorn
    image: localhost/moneybook_gunicorn:latest
    env:
    - name: DB_NAME
      value: "${DB_NAME}"
    - name: DB_USER
      value: "${DB_USER}"
    - name: DB_PASS
      value: "${DB_PASS}"
    - name: DB_HOST
      value: "${DB_HOST}"
    - name: ALLOWED_HOSTS
      value: "${ALLOWED_HOSTS}"
    - name: SECRET_KEY
      value: "${SECRET_KEY}"
    ports:
    - containerPort: 8081
      protocol: TCP
    
  - name: nginx
    image: localhost/moneybook_nginx:latest
    ports:
    - containerPort: 80
      hostPort: 8081
      protocol: TCP
